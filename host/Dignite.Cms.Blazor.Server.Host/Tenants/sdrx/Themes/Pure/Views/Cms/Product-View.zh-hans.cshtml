@using Dignite.Cms.Public.Entries
@using System.Text.Json;
@using Dignite.Abp.DynamicForms;
@using Dignite.FileExplorer.Files;
@model EntryDto
@{
    var fileValue = Model.GetField("multiFiles", null);
    var categoryValue = Model.GetField("category", null);
    var category = JsonSerializer.Deserialize<string[]>(categoryValue.ToString())[0];
    List<FileDescriptorDto> images = JsonSerializer.Deserialize<List<FileDescriptorDto>>(fileValue.ToString());
    PageLayout.Content.Title = Model.Title;
}

<nav aria-label="breadcrumb" class="bg-secondary bg-opacity-10 mb-3 p-2 ps-3">
    <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item"><a href="~/@Model.Language">首页</a></li>
        <li class="breadcrumb-item"><a href="~/@Model.Language/products">产品</a></li>
        <li class="breadcrumb-item active" aria-current="page">产品资料</li>
    </ol>
</nav>
<div class="row gx-5">
    <div class="col-8">
        <div id="carousel-images" class="carousel slide">
            <div class="carousel-indicators">
                @foreach(var item in images)
                {
                    <button type="button" data-bs-target="#carousel-images" data-bs-slide-to="@images.IndexOf(item)" class="@(images.IndexOf(item)==0?"active":"")" aria-current="true" aria-label="Slide 1"></button>
                }
            </div>
            <div class="carousel-inner">
                @foreach (var item in images)
                {
                    var imageUrl = $"/api/file-explorer/files/{item.ContainerName}/{item.BlobName}";
                    <div class="carousel-item @(images.IndexOf(item)==0?"active":"")">
                        <img src="@imageUrl" class="d-block w-100" alt="@item.Name">
                    </div>
                }
            </div>
            <button class="carousel-control-prev carousel-control-prev-bottom rounded-circle" type="button" data-bs-target="#carousel-images" data-bs-slide="prev">
                <i class="fas fa-chevron-left"></i>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next carousel-control-next-bottom rounded-circle" type="button" data-bs-target="#carousel-images" data-bs-slide="next">
                <i class="fas fa-chevron-right"></i>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <div class="col-4">
        <p>
            @category
        </p>
        <h3 class="mb-5">
            @Model.Title
        </h3>
        <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span class="text-secondary">产品材质</span>
                <span>@(Model.GetField<string>("caizhi", null))</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                
                <span class="text-secondary">产品颜色</span>
                <span>@(Model.GetField<string>("color", null))</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                
                <span class="text-secondary">使用范围</span>
                <span>@(Model.GetField<string>("fanwei", null))</span>
            </li>
        </ul>
        <div class="content pt-5">@Html.Raw(Model.GetField<string>("description", null))</div>
    </div>
</div>
<div class="mt-5 text-center bg-secondary bg-opacity-10 p-5 content">
    <h3 class="mb-3">
        产品介绍
    </h3>
    @Html.Raw(Model.GetField<string>("content", null))
</div>
